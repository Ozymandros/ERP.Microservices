### Test: CheckPermission_WithValidCredentials_ReturnsPermissionStatus

# 1. Environment Variables
# Make sure to set your URL and authentication token
@baseUrl = http://localhost:5001  # Adjust this URL to your configuration
@apiPath = /api/permissions
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6ImE0OGYzZDUwLTljNGEtNGQ4Zi04NDBlLTA4ZGUxNGI3NmEwMSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImFkbWluQG15YXBwLmxvY2FsIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZSI6ImFkbWluQG15YXBwLmxvY2FsIiwiRmlyc3ROYW1lIjoiIiwiTGFzdE5hbWUiOiIiLCJFbWFpbENvbmZpcm1lZCI6IlRydWUiLCJJc0V4dGVybmFsTG9naW4iOiJGYWxzZSIsIkV4dGVybmFsUHJvdmlkZXIiOiIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbiIsImV4cCI6MTc2MTkxMDA1MywiaXNzIjoiTXlBcHAuQXV0aCIsImF1ZCI6Ik15QXBwLkFsbCJ9.RT9I3_LR9NfpyNfvOsU-GbLOd5V6EoNnn3V3vTV6pus

# 2. Test Variables
# Values for the 'module' and 'action' parameters
@testModule = Users
@testAction = Read

# 3. GET Request
# The endpoint is "check", and parameters are passed as query string (?module=...&action=...)
GET http://localhost:5001/api/Permissions/check?module=users&action=Read
Authorization: Bearer {{authToken}}
Accept: application/json

### 

GET http://localhost:5001/api/Permissions/
Authorization: Bearer {{authToken}}
Accept: application/json

### Expected:
# - Response code: 200 OK (If the token is valid)
# - Response body: true or false (boolean)

# Example test without permission or with a module/action that doesn't exist
#
### Test: CheckPermission_NoAccess_ReturnsFalse

@testModule2 = accounting
@testAction2 = view_reports

GET {{baseUrl}}{{apiPath}}/check?module={{testModule2}}&action={{testAction2}}
Authorization: Bearer {{authToken}}

### Expected:
# - Response code: 200 OK
# - Response body: false

# Example test without authentication token (should return 401 Unauthorized)
#
### Test: CheckPermission_NoAuth_Returns401

GET {{baseUrl}}{{apiPath}}/check?module=test&action=test
Accept: application/json

### Expected:
# - Response code: 401 Unauthorized