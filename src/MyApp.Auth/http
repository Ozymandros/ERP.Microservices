### Test: CheckPermission_WithValidCredentials_ReturnsPermissionStatus

# 1. Environment Variables
# Make sure to set your URL and authentication token
@baseUrl = https://localhost:7001  # Adjust this URL to your configuration
@apiPath = /api/permissions
@authToken = <YOUR_ACCESS_TOKEN_HERE> # A valid JWT token is required

# 2. Test Variables
# Values for the 'module' and 'action' parameters
@testModule = sales
@testAction = create_customer

# 3. GET Request
# The endpoint is "check", and parameters are passed as query string (?module=...&action=...)
GET {{baseUrl}}{{apiPath}}/check?module={{testModule}}&action={{testAction}}
Authorization: Bearer {{authToken}}
Accept: application/json

### Expected:
# - Response code: 200 OK (If the token is valid)
# - Response body: true or false (boolean)

# Example test without permission or with a module/action that doesn't exist
#
### Test: CheckPermission_NoAccess_ReturnsFalse

@testModule2 = accounting
@testAction2 = view_reports

GET {{baseUrl}}{{apiPath}}/check?module={{testModule2}}&action={{testAction2}}
Authorization: Bearer {{authToken}}
Accept: application/json

### Expected:
# - Response code: 200 OK
# - Response body: false

# Example test without authentication token (should return 401 Unauthorized)
#
### Test: CheckPermission_NoAuth_Returns401

GET {{baseUrl}}{{apiPath}}/check?module=test&action=test
Accept: application/json

### Expected:
# - Response code: 401 Unauthorized